% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_step3_grn_diff.R
\name{build_cellwise_contrasts_from_index}
\alias{build_cellwise_contrasts_from_index}
\title{Build contrasts from lighting index: either per-cell or global control}
\usage{
build_cellwise_contrasts_from_index(
  index_csv,
  out_dir,
  prefix = "lighting",
  ctrl_tag = "10_FBS",
  clean_names = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{index_csv}{Path to `lighting_per_condition_index.csv` (must contain `label`).}

\item{out_dir}{Directory containing per-condition links CSVs.}

\item{prefix}{File prefix used by `light_by_condition()` (default `"lighting"`).}

\item{ctrl_tag}{Control tag. For global control, this is the **exact label** (e.g., `"Ctrl"`).
For per-cell control, this is the suffix after `<cell>_` (e.g., `"10_FBS"`).}

\item{clean_names}{Logical; sanitize condition names in specs with `janitor::make_clean_names()`.}

\item{verbose}{Logical.}
}
\value{
Tibble with columns `cond1_label`, `cond2_label`, `cond1_source`,
  `cond2_source`, `cond1_name`, `cond2_name`, `out_file`.
}
\description{
If the index contains an exact match to `ctrl_tag` (e.g., "Ctrl"), build
contrasts of **every other label vs that global control**.
}
\details{
Otherwise, fall back to the original per-cell behavior where `label` has the
form `<cell>_<condition>` and the control is `<cell>_{ctrl_tag}` (e.g., "HPAFII_10_FBS").
}

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_step1_footprints.R
\name{load_footprints}
\alias{load_footprints}
\title{Stream motifs: load -> filter(any bound) -> write per motif CSVs (parallel)}
\usage{
load_footprints(
  root_dir,
  db_name,
  out_dir = NULL,
  sample_ids = NULL,
  n_samples = NULL,
  motif_ids = NULL,
  n_motifs = NULL,
  n_workers = max(1L, parallel::detectCores(TRUE)),
  set_plan = TRUE,
  skip_existing = TRUE,
  verbose = TRUE,
  log_file = NULL,
  memory_check = TRUE,
  memory_check_n_motifs = 3L,
  memory_check_factor = 2.5,
  memory_check_fraction = 0.75,
  ask_on_risk = TRUE
)
}
\arguments{
\item{root_dir, db_name}{Paths as above.}

\item{out_dir}{Output directory (e.g., "inst/extdata/fp_scores_jaspar2024").}

\item{sample_ids, n_samples}{Subset/limit samples.}

\item{motif_ids, n_motifs}{Subset/limit motifs (folder names).}

\item{n_workers}{Parallel workers (motif-level). Default: all logical cores.}

\item{set_plan}{Whether to set a future plan. Default TRUE.}

\item{skip_existing}{If TRUE, skip a motif when all three output files already exist.}

\item{verbose}{Print progress.}

\item{log_file}{Optional log file path for per-motif messages (useful with parallel runs).}

\item{memory_check}{Logical; run a conservative RAM-risk preflight check.}

\item{memory_check_n_motifs}{Integer; number of motifs to sample for RAM estimate.}

\item{memory_check_factor}{Numeric; multiplier for in-memory overhead (conservative).}

\item{memory_check_fraction}{Numeric; fraction of available RAM allowed for estimate.}

\item{ask_on_risk}{Logical; if TRUE and interactive, prompt on OOM risk.}
}
\value{
A tibble summarizing outputs: motif, n_peaks, score, bound, annot.
}
\description{
This function avoids building a giant all-motifs table. It:
 1) Discovers motifs (or uses user-provided list)
 2) In parallel (per motif): loads one motif across all samples,
    filters to rows with any *_ATAC_bound == 1, then calls
    `write_fp_tables_by_motif()` to emit "<motif>_{score,bound,annotation}.csv"
    to `out_dir`.
}
